% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/survey_analysis.R
\name{survey_analysis}
\alias{survey_analysis}
\title{Batch Collapse Survey Data into tidy long format}
\usage{
survey_analysis(
  df,
  weights = FALSE,
  weight_column = NULL,
  reporting_col = c("weighted", "unweighted", "both")[3],
  strata,
  vars_to_analyze = NULL,
  disag = NULL,
  na_val = NA,
  sm_sep = "/",
  question_lable = FALSE,
  kobo_path = NULL
)
}
\arguments{
\item{df}{A \code{tbl_svy} object created with \code{srvyr::as_survey()} (or compatible).}

\item{weights}{Logical; whether to apply survey weights}

\item{weight_column}{Column name for weights}

\item{reporting_col}{One of "weighted", "both", or "unweighted".}

\item{strata}{Strata variable}

\item{vars_to_analyze}{Variables to collapse}

\item{disag}{Optional character vector of column names to disaggregate by
(analogous to \code{dplyr::group_by()} before collapsing).}

\item{na_val}{Replacement value for \code{NA}s before aggregation.
If \code{NA_real_} (default), rows with missing \code{x} are removed.
If a number is provided, missing \code{x} are replaced with that value.}

\item{sm_sep}{Single-character separator used by select-multiple columns
(default \code{"/"}). The function derives a \code{variable} column by
removing the child suffix after the last occurrence of this separator.}

\item{question_lable}{Logical; if TRUE, append Kobo labels}

\item{kobo_path}{Path to Kobo XLSForm}
}
\value{
A tidy long data frame of survey results
}
\description{
Uses \code{\link[srvyr:survey_mean]{srvyr::survey_mean()}} to collapse or aggregate survey data
by calling \code{\link[=survey_collapse_categorical_long]{survey_collapse_categorical_long()}} and \code{\link[=survey_collapse_numeric_long]{survey_collapse_numeric_long()}}.
Extracted and adapted from the butteR package.
}
