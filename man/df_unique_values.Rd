% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/data_summary.R
\name{df_unique_values}
\alias{df_unique_values}
\title{Summarize Unique Values and Basic Statistics for Kobo-Style Datasets}
\usage{
df_unique_values(df, max_unique = 20, top_reported_col = 3)
}
\arguments{
\item{df}{A dataframe or tibble containing survey data.}

\item{max_unique}{Integer. Maximum number of unique values allowed in a
column to be included in the output. Columns with more than this number
of unique values are skipped. Default is \code{20}.}

\item{top_reported_col}{Integer. Number of most frequently occurring
categories to display when summarizing categorical variables.
Default is \code{3}.}
}
\value{
A tibble summarizing each eligible column in the input dataframe.
}
\description{
\code{df_unique_values()} inspects each column of a dataframe and produces a
summary containing the number of unique values, the list of unique values,
and a formatted statistics string.
}
\details{
The function is especially designed for Kobo-based survey datasets where:
\itemize{
\item numeric values may be encoded as character strings,
\item logical, categorical, and numeric fields all require different summarization,
\item some columns (e.g., \verb{X_*}, \verb{_other}, or survey matrix parents) must be excluded.
}

The output returns one row per column that passes the filtering rules.

The function performs the following steps:

\enumerate{
\item Removes unwanted columns:
\itemize{
\item Columns starting with \code{"X_"}.
\item Columns ending with \code{"_other"}.
\item Survey parent columns auto-detected using
\code{auto_detect_sm_parents()}.
}
\item Detects numeric-like columns: even if values are stored as
characters (\code{"1"}, \code{"2"}, \code{"3"}), they are treated as numeric.
\item Computes column-specific statistics:
\itemize{
\item \strong{Numeric}: mean, median, sd, and total non-missing N.
\item \strong{Logical}: percentage breakdown of TRUE/FALSE.
\item \strong{Categorical}: top X most frequent categories with
percentage and total N.
}
\item Returns a tibble with four columns:
\describe{
\item{\code{column}}{Column name.}
\item{\code{n_unique}}{Number of unique (non-NA) values.}
\item{\code{unique_values}}{Comma-separated list of unique values.}
\item{\code{top_stats}}{Formatted statistics string.}
}
}
}
\examples{
\dontrun{
df <- tibble(
  gender = c("male", "female", "female"),
  age = c("20", "22", "25"),   # numeric-like characters
  consent = c(TRUE, FALSE, TRUE)
)

df_unique_values(df)

df_unique_values(df, max_unique = 10, top_reported_col = 2)
}

}
